<!DOCTYPE html>
{% load static %}
<html lang="en">

<head>
    <meta charset="utf-8" />
    <title>School Manager | Register</title>
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <link rel="shortcut icon" href="{% static 'school_manager/assets/images/favicon.ico' %}">
    <link href="{% static 'school_manager/assets/css/bootstrap.min.css' %}" rel="stylesheet" />
    <link href="{% static 'school_manager/assets/css/icons.min.css' %}" rel="stylesheet" />
    <link href="{% static 'school_manager/assets/css/app.min.css' %}" rel="stylesheet" />
    <script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/sweetalert2@11"></script>

    <!-- ✅ Injection de l’URL Django dans le scope global -->
    <script>
        window.loginUrl = "{% url 'comptes:login' %}";
    </script>
</head>

<body>
<div class="container-xxl">
    <div class="row vh-100 d-flex justify-content-center">
        <div class="col-12 align-self-center">
            <div class="card-body mt-4">
                <div class="row">
                    <div class="col-lg-4 mx-auto">
                        <div class="card">
                            <div class="card-body p-0 bg-black auth-header-box rounded-top">
                                <div class="text-center p-3">
                                    <a href="{% url 'comptes:login' %}">
                                        <img src="{% static 'school_manager/assets/images/logo-sm.png' %}" height="50" alt="logo">
                                    </a>
                                    <h4 class="mt-3 mb-1 text-white">Create an account</h4>
                                    <p class="text-muted">Enter your detail to Create your account today.</p>
                                </div>
                            </div>
                            <div class="card-body pt-0">
                                <form class="my-4" action="{% url 'comptes:register' %}" method="post">
                                    {% csrf_token %}

                                    <input type="hidden" id="login-url" value="{% url 'comptes:login' %}">

                                    <div class="form-group mb-2 input-field-group">
                                        <label for="name">Nom Complet</label>
                                        <input type="text" class="form-control" id="name" name="name" placeholder="Enter name">
                                    </div>

                                    <div class="form-group mb-2 input-field-group">
                                        <label for="username">Email</label>
                                        <input type="email" class="form-control" id="username" name="username" placeholder="Enter email">
                                    </div>

                                    <div class="form-group mb-2 input-field-group">
                                        <label for="userpassword">Password</label>
                                        <input type="password" class="form-control" id="userpassword" name="password" placeholder="Enter password">
                                    </div>

                                    <div class="form-group mb-2 input-field-group">
                                        <label for="Confirmpassword">Confirm Password</label>
                                        <input type="password" class="form-control" id="Confirmpassword" name="password" placeholder="Confirm password">
                                    </div>

                                    <div id="otp-section" style="display:none;">
                                        <label for="otp">Entrez le code OTP</label>
                                        <input type="text" class="form-control" id="otp" name="otp" placeholder="Code reçu">
                                    </div>

                                    <div id="resend-otp-container" style="display: none;" class="mt-2">
                                        <p class="text-muted">
                                            Vous n'avez pas reçu de code ? <a href="#" id="resend-otp-link" class="text-primary">Renvoyer le code</a>
                                        </p>
                                    </div>

                                    <div class="form-group row mt-3 input-field-group">
                                        <div class="col-12">
                                            <div class="form-check form-switch form-switch-success">
                                                <input class="form-check-input" type="checkbox" id="customSwitchSuccess">
                                                <label class="form-check-label" for="customSwitchSuccess">J'accepte les <a href="#" class="text-primary">Conditions d'utilisation</a></label>
                                            </div>
                                        </div>
                                    </div>

                                    <div class="form-group mb-0 row">
                                        <div class="col-12">
                                            <div class="d-grid mt-3">
                                                <button id="register-btn" class="btn btn-primary" type="submit">S'inscrire</button>
                                            </div>
                                        </div>
                                    </div>
                                </form>

                                <div class="text-center">
                                    <p class="text-muted">Déjà inscrit ? <a href="{% url 'comptes:login' %}" class="text-primary">Connectez-vous</a></p>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>

<!-- ✅ Ton JS -->
<script src="{% static 'comptes/js/register.js' %}"></script>
</body>
</html>
